!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a),a("eVdBp");var o={};!function(e,t){var n=function(e,t,n){"use strict";var a,o;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in o=e.lazySizesConfig||e.lazysizesConfig||{},n)t in o||(o[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:o,noSupport:!0};var i=t.documentElement,s=e.HTMLPictureElement,l="addEventListener",r="getAttribute",d=e[l].bind(e),c=e.setTimeout,m=e.requestAnimationFrame||c,u=e.requestIdleCallback,g=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],h={},p=Array.prototype.forEach,y=function(e,t){return h[t]||(h[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),h[t].test(e[r]("class")||"")&&h[t]},v=function(e,t){y(e,t)||e.setAttribute("class",(e[r]("class")||"").trim()+" "+t)},L=function(e,t){var n;(n=y(e,t))&&e.setAttribute("class",(e[r]("class")||"").replace(n," "))},k=function(e,t,n){var a=n?l:"removeEventListener";n&&k(e,t),f.forEach((function(n){e[a](n,t)}))},w=function(e,n,o,i,s){var l=t.createEvent("Event");return o||(o={}),o.instance=a,l.initEvent(n,!i,!s),l.detail=o,e.dispatchEvent(l),l},b=function(t,n){var a;!s&&(a=e.picturefill||o.pf)?(n&&n.src&&!t[r]("srcset")&&t.setAttribute("srcset",n.src),a({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},E=function(e,t){return(getComputedStyle(e,null)||{})[t]},z=function(e,t,n){for(n=n||e.offsetWidth;n<o.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},_=(ve=[],Le=[],ke=ve,we=function(){var e=ke;for(ke=ve.length?Le:ve,pe=!0,ye=!1;e.length;)e.shift()();pe=!1},be=function(e,n){pe&&!n?e.apply(this,arguments):(ke.push(e),ye||(ye=!0,(t.hidden?c:m)(we)))},be._lsFlush=we,be),C=function(e,t){return t?function(){_(e)}:function(){var t=this,n=arguments;_((function(){e.apply(t,n)}))}},T=function(e){var t,a=0,i=o.throttleDelay,s=o.ricTimeout,l=function(){t=!1,a=n.now(),e()},r=u&&s>49?function(){u(l,{timeout:s}),s!==o.ricTimeout&&(s=o.ricTimeout)}:C((function(){c(l)}),!0);return function(e){var o;(e=!0===e)&&(s=33),t||(t=!0,(o=i-(n.now()-a))<0&&(o=0),e||o<9?r():c(r,o))}},A=function(e){var t,a,o=99,i=function(){t=null,e()},s=function(){var e=n.now()-a;e<o?c(s,o-e):(u||i)(i)};return function(){a=n.now(),t||(t=c(s,o))}},x=(J=/^img$/i,V=/^iframe$/i,K="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),Q=0,X=0,Z=0,ee=-1,te=function(e){Z--,(!e||Z<0||!e.target)&&(Z=0)},ne=function(e){return null==Y&&(Y="hidden"==E(t.body,"visibility")),Y||!("hidden"==E(e.parentNode,"visibility")&&"hidden"==E(e,"visibility"))},ae=function(e,n){var a,o=e,s=ne(e);for(F-=n,P+=n,G-=n,U+=n;s&&(o=o.offsetParent)&&o!=t.body&&o!=i;)(s=(E(o,"opacity")||1)>0)&&"visible"!=E(o,"overflow")&&(a=o.getBoundingClientRect(),s=U>a.left&&G<a.right&&P>a.top-1&&F<a.bottom+1);return s},oe=function(){var e,n,s,l,d,c,m,u,g,f,h,p,y=a.elements;if((j=o.loadMode)&&Z<8&&(e=y.length)){for(n=0,ee++;n<e;n++)if(y[n]&&!y[n]._lazyRace)if(!K||a.prematureUnveil&&a.prematureUnveil(y[n]))ue(y[n]);else if((u=y[n][r]("data-expand"))&&(c=1*u)||(c=X),f||(f=!o.expand||o.expand<1?i.clientHeight>500&&i.clientWidth>500?500:370:o.expand,a._defEx=f,h=f*o.expFactor,p=o.hFac,Y=null,X<h&&Z<1&&ee>2&&j>2&&!t.hidden?(X=h,ee=0):X=j>1&&ee>1&&Z<6?f:Q),g!==c&&(W=innerWidth+c*p,R=innerHeight+c,m=-1*c,g=c),s=y[n].getBoundingClientRect(),(P=s.bottom)>=m&&(F=s.top)<=R&&(U=s.right)>=m*p&&(G=s.left)<=W&&(P||U||G||F)&&(o.loadHidden||ne(y[n]))&&(q&&Z<3&&!u&&(j<3||ee<4)||ae(y[n],c))){if(ue(y[n]),d=!0,Z>9)break}else!d&&q&&!l&&Z<4&&ee<4&&j>2&&(O[0]||o.preloadAfterLoad)&&(O[0]||!u&&(P||U||G||F||"auto"!=y[n][r](o.sizesAttr)))&&(l=O[0]||y[n]);l&&!d&&ue(l)}},ie=T(oe),se=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(te(e),v(t,o.loadedClass),L(t,o.loadingClass),k(t,re),w(t,"lazyloaded"))},le=C(se),re=function(e){le({target:e.target})},de=function(e,t){var n=e.getAttribute("data-load-mode")||o.iframeLoadMode;0==n?e.contentWindow.location.replace(t):1==n&&(e.src=t)},ce=function(e){var t,n=e[r](o.srcsetAttr);(t=o.customMedia[e[r]("data-media")||e[r]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},me=C((function(e,t,n,a,i){var s,l,d,m,u,f;(u=w(e,"lazybeforeunveil",t)).defaultPrevented||(a&&(n?v(e,o.autosizesClass):e.setAttribute("sizes",a)),l=e[r](o.srcsetAttr),s=e[r](o.srcAttr),i&&(m=(d=e.parentNode)&&g.test(d.nodeName||"")),f=t.firesLoad||"src"in e&&(l||s||m),u={target:e},v(e,o.loadingClass),f&&(clearTimeout(H),H=c(te,2500),k(e,re,!0)),m&&p.call(d.getElementsByTagName("source"),ce),l?e.setAttribute("srcset",l):s&&!m&&(V.test(e.nodeName)?de(e,s):e.src=s),i&&(l||m)&&b(e,{src:s})),e._lazyRace&&delete e._lazyRace,L(e,o.lazyClass),_((function(){var t=e.complete&&e.naturalWidth>1;f&&!t||(t&&v(e,o.fastLoadedClass),se(u),e._lazyCache=!0,c((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&Z--}),!0)})),ue=function(e){if(!e._lazyRace){var t,n=J.test(e.nodeName),a=n&&(e[r](o.sizesAttr)||e[r]("sizes")),i="auto"==a;(!i&&q||!n||!e[r]("src")&&!e.srcset||e.complete||y(e,o.errorClass)||!y(e,o.lazyClass))&&(t=w(e,"lazyunveilread").detail,i&&N.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,Z++,me(e,t,i,a,n))}},ge=A((function(){o.loadMode=3,ie()})),fe=function(){3==o.loadMode&&(o.loadMode=2),ge()},he=function(){q||(n.now()-D<999?c(he,999):(q=!0,o.loadMode=3,ie(),d("scroll",fe,!0)))},{_:function(){D=n.now(),a.elements=t.getElementsByClassName(o.lazyClass),O=t.getElementsByClassName(o.lazyClass+" "+o.preloadClass),d("scroll",ie,!0),d("resize",ie,!0),d("pageshow",(function(e){if(e.persisted){var n=t.querySelectorAll("."+o.loadingClass);n.length&&n.forEach&&m((function(){n.forEach((function(e){e.complete&&ue(e)}))}))}})),e.MutationObserver?new MutationObserver(ie).observe(i,{childList:!0,subtree:!0,attributes:!0}):(i[l]("DOMNodeInserted",ie,!0),i[l]("DOMAttrModified",ie,!0),setInterval(ie,999)),d("hashchange",ie,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t[l](e,ie,!0)})),/d$|^c/.test(t.readyState)?he():(d("load",he),t[l]("DOMContentLoaded",ie),c(he,2e4)),a.elements.length?(oe(),_._lsFlush()):ie()},checkElems:ie,unveil:ue,_aLSL:fe}),N=(S=C((function(e,t,n,a){var o,i,s;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),g.test(t.nodeName||""))for(i=0,s=(o=t.getElementsByTagName("source")).length;i<s;i++)o[i].setAttribute("sizes",a);n.detail.dataAttr||b(e,n.detail)})),M=function(e,t,n){var a,o=e.parentNode;o&&(n=z(e,o,n),(a=w(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=a.detail.width)&&n!==e._lazysizesWidth&&S(e,o,a,n))},I=A((function(){var e,t=$.length;if(t)for(e=0;e<t;e++)M($[e])})),{_:function(){$=t.getElementsByClassName(o.autosizesClass),d("resize",I)},checkElems:I,updateElem:M}),B=function(){!B.i&&t.getElementsByClassName&&(B.i=!0,N._(),x._())};var $,S,M,I;var O,q,H,j,D,W,R,F,G,U,P,Y,J,V,K,Q,X,Z,ee,te,ne,ae,oe,ie,se,le,re,de,ce,me,ue,ge,fe,he;var pe,ye,ve,Le,ke,we,be;return c((function(){o.init&&B()})),a={cfg:o,autoSizer:N,loader:x,init:B,uP:b,aC:v,rC:L,hC:y,fire:w,gW:z,rAF:_}}(e,e.document,Date);e.lazySizes=n,o&&(o=n)}("undefined"!=typeof window?window:{});const i=e=>e.map((({book_image:e,title:t,author:n,_id:a,list_name:o,description:i,buy_links:s})=>`\n      <li class="book-item" class="_list  "\n        data-title="${t}"\n        data-image="${e}"\n        data-author="${n}"\n        data-listName="${o}"\n        data-description="${i}"\n        data-linkNameAmazon="${s[0].name}"\n        data-linkUrlAmazon="${s[0].url}"\n        data-linkNameApple="${s[1].name}"\n        data-linkUrlApple="${s[1].url}"\n        data-linkNameBarnes="${s[2].name}"\n        data-linkUrlBarnes="${s[2].url}"\n      >\n        <a href="#" class="_link" class="book-item" data-id="${a}">\n          <div class="thumb">\n            <img class="lazyload" data-sizes="auto" src="https://raw.githubusercontent.com/theGreatGrandfather/apple/main/src/images/testBook.png" data-src="${e}" alt="${t}" loading="lazy" width='335' height='500'/>\n            <div class="overlay">\n              <p class="overlay-text">quick view </p>\n            </div>\n          </div>\n          <h4 class="book-title">${t}</h4>\n          <p class="book-author">${n}</p>\n        </a>\n      </li>\n    `)).join("");var s=a("dIxxU"),l=a("6JpON");const r="https://books-backend.p.goit.global",d=async()=>{try{return(await s.default.get(`${r}/books/category-list`)).data}catch(e){l.Notify.failure("Something went wrong. Try to reload the page")}},c=async()=>{try{return(await s.default.get(`${r}/books/top-books`)).data}catch(e){l.Notify.failure("Something went wrong. Try to reload the page")}throw new Error(error)},m=async e=>{try{return(await s.default.get(`${r}/books/category`,{params:{category:e}})).data}catch(e){l.Notify.failure("Something went wrong. Try to reload the page")}};l=a("6JpON");const u=document.querySelector(".categories__list");(async()=>(await d()).map((({list_name:e})=>`\n                <li class='categories__item _list'>\n                    <a data-categories__item data-listName='${e}' rel='noopener no-referrel nofollow' class='categories__link _link' href='#'>${e}</a>\n                </li>`)).sort().join(""))().then((e=>{u.insertAdjacentHTML("beforeend",e)})).catch((e=>{l.Notify.failure("Something went wrong. Try to reload the page")}));var g=a("kvC6y");const f=document.querySelector(".title_best-sellers"),h=async e=>await m(e);u.addEventListener("click",(e=>{if(e.target.hasAttribute("data-categories__item")){e.preventDefault(),(0,g.loaderOn)();const t=document.querySelector(".categories__list").getElementsByClassName("categories__link"),n=Array.from(t);for(let e=0;e<n.length;e++){n[e].classList.remove("active__link")}e.target.classList.add("active__link");const a=e.target.dataset.listname.split(" ");a.pop();const o=e.target.dataset.listname.split(" ")[e.target.dataset.listname.split(" ").length-1];h(e.target.dataset.listname).then((e=>{f.classList.add("no-change"),f.innerHTML=`${a.join(" ")}&nbsp\n                <span class="title_book">${o}</span>`,p.innerHTML=i(e),(0,g.loaderOff)(),document.documentElement.scrollWidth>=1440||document.querySelector("#best-sellers-container").scrollIntoView({behavior:"smooth",block:"start"})}))}}));g=a("kvC6y"),l=a("6JpON");const p=document.querySelector(".best_list");let y=5;const v=()=>!f.classList.contains("no-change"),L=async()=>{if(v())try{(0,g.loaderOn)();const e=await c();if(0===e.length)return;const t=e.map((({books:e,list_name:t})=>{const n=e.slice(0,y);return`<li class='best-item _list _anim-items'>\n                <h3 class='min-title'>${t}</h3>\n                <ul class='books-list'>\n                    ${i(n)}\n                </ul>\n                <button class='see_more' data-name="${t}">See More</button>\n              </li>`}));p.innerHTML=t.join("")}catch(e){(0,g.loaderOff)(),l.Notify.failure("Something went wrong. Try to reload the page")}finally{(0,g.loaderOff)()}},k=()=>{y=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(min-width: 768px) and (max-width: 1439px)").matches?3:5,L()},w=((e,t)=>{let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>e(...a)),t)}})(k,300);window.addEventListener("resize",w);window.addEventListener("resize",(()=>{v(),0})),window.addEventListener("load",(()=>{k()}));var b=a("6uLmu"),E=a("gQOBw"),z=a("iNWLi"),_=(E=a("gQOBw"),a("6m2hf"));const C=(0,E.getAuth)(z.app),T=(0,_.getFirestore)(z.app),A={body:document.querySelector("body"),modal:document.getElementById("modal"),modalInner:document.getElementById("modal-inner"),modalTitle:document.getElementById("modal-title"),modalAuthor:document.getElementById("modal-author"),modalDescr:document.getElementById("modal-description"),modalImg:document.getElementById("modal-image"),modalClose:document.getElementById("modal-close-btn"),amazonLink:document.getElementById("amazon-link"),appleLink:document.getElementById("apple-link"),barnesLink:document.getElementById("barnes-link"),addToList:document.getElementById("modal-add-to-list"),modalGreetings:document.getElementById("modal-greetings-text"),books:document.getElementById("best-sellers-container")},x="Add to shopping list",N="Remove from the shopping list";let B={},$=!1;const S=e=>{A.modal.classList.add("modal-js"),A.body.classList.remove("no-scroll-js"),A.modalClose.removeEventListener("click",S),document.removeEventListener("keydown",I),A.addToList.removeEventListener("click",O),A.modal.removeEventListener("click",M)},M=e=>{e.target===e.currentTarget&&(S(),A.modalClose.removeEventListener("click",S),document.removeEventListener("keydown",I),A.addToList.removeEventListener("click",O),A.modal.removeEventListener("click",M))},I=e=>{"Escape"===e.key&&(S(),A.modalClose.removeEventListener("click",S),document.removeEventListener("keydown",I),A.addToList.removeEventListener("click",O),A.modal.removeEventListener("click",M))},O=()=>{$?((0,b.delBook)(B.id),A.addToList.textContent=x,A.modalGreetings.classList.add("modal-greetings-text-js"),$=!1):((0,b.pullBookData)(B),A.addToList.textContent=N,A.modalGreetings.classList.remove("modal-greetings-text-js"),$=!0)};A.books.addEventListener("click",(e=>{if(e.preventDefault(),(0,E.onAuthStateChanged)(C,(async e=>{if(e){const t=e.email,n=await(0,_.getDocs)((0,_.collection)(T,t)),a=[];n.forEach((e=>a.push(e.data().id))),a.some((e=>e===B.id))?($=!0,A.addToList.textContent=N,A.modalGreetings.classList.remove("modal-greetings-text-js")):($=!1,A.addToList.textContent=x,A.modalGreetings.classList.add("modal-greetings-text-js")),A.addToList.disabled=!1,A.addToList.style.cursor="pointer"}else A.addToList.disabled=!0,A.addToList.innerText="Please, sign up to shopping",A.addToList.style.cursor="not-allowed"})),!e.target.closest(".book-item"))return;A.modalClose.addEventListener("click",S),document.addEventListener("keydown",I),A.addToList.addEventListener("click",O),A.modal.addEventListener("click",M);const t=e.target.closest(".book-item");B={id:t.querySelector("._link").dataset.id,title:t.dataset.title,img:t.dataset.image,author:t.dataset.author,description:t.dataset.description,amazonLink:t.dataset.linkurlamazon,appleLink:t.dataset.linkurlapple,barnesLink:t.dataset.linkurlbarnes,listname:t.dataset.listname},A.modalTitle.textContent=B.title,A.modalAuthor.textContent=B.author,A.modalDescr.textContent=B.description,A.modalImg.src=B.img,A.amazonLink.href=B.amazonLink,A.appleLink.href=B.appleLink,A.barnesLink.href=B.barnesLink,$?(A.addToList.textContent=N,A.modalGreetings.classList.remove("modal-greetings-text-js")):(A.addToList.textContent=x,A.modalGreetings.classList.add("modal-greetings-text-js")),A.body.classList.add("no-scroll-js"),A.modal.classList.toggle("modal-js")}));const q=document.querySelectorAll("._anim-items");if(q.length>0){function H(){for(let e=0;e<q.length;e++){const t=q[e],n=t.offsetHeight,a=j(t).top,o=4;let i=window.innerHeight-n/o;n>window.innerHeight&&(i=window.innerHeight-window.innerHeight/o),scrollY>a-i&scrollY<a+n?t.classList.add("_active"):t.classList.remove("_active")}}function j(e){const t=e.getBoundingClientRect(),n=window.scrollX||document.documentElement.scrollLeft,a=window.scrollY||document.documentElement.scrollTop;return{top:t.top+a,left:t.left+n}}window.addEventListener("scroll",H),setTimeout((()=>{H()}),300)}a("4jEcb"),a("7hKzD");const D=document.querySelector(".go-top");D.hidden=!0;const W=()=>{window.scrollY>0&&(window.scrollBy(0,-82),setTimeout(W,0))};window.addEventListener("scroll",(()=>{const e=window.scrollY,t=document.documentElement.clientHeight;D.hidden=!(5*e>=t)})),D.addEventListener("click",W),a("50Y4H"),a("f5DzK");g=a("kvC6y");p.addEventListener("click",(e=>{if(e.target.classList.contains("see_more")){e.preventDefault(),(0,g.loaderOn)();const t=document.querySelector(".categories__list").getElementsByClassName("categories__link"),n=Array.from(t);for(let t=0;t<n.length;t++){const a=n[t];a.classList.remove("active__link"),e.target.dataset.name===a.innerText&&a.classList.add("active__link")}const a=e.target.dataset.name.split(" ");a.pop();const o=e.target.dataset.name.split(" ")[e.target.dataset.name.split(" ").length-1];h(e.target.dataset.name).then((e=>{f.classList.add("no-change"),f.innerHTML=`${a.join(" ")}&nbsp\n                <span class="title_book">${o}</span>`,p.innerHTML=i(e),(0,g.loaderOff)(),document.querySelector("#best-sellers-container").scrollIntoView({behavior:"smooth",block:"start"})}))}})),a("k0tN7"),a("kvC6y");const R=document.querySelector(".home"),F=document.querySelector(".menu-home");R.classList.add("active"),F.classList.add("active")}();
//# sourceMappingURL=index.383470d0.js.map
