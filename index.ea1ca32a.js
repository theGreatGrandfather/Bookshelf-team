var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a),a("h0Nss");const o=e=>e.map((({book_image:e,title:t,author:n,_id:a,list_name:o,description:s,buy_links:i})=>`\n      <li class="book-item" class="_list  "\n        data-title="${t}"\n        data-image="${e}"\n        data-author="${n}"\n        data-listName="${o}"\n        data-description="${s}"\n        data-linkNameAmazon="${i[0].name}"\n        data-linkUrlAmazon="${i[0].url}"\n        data-linkNameApple="${i[1].name}"\n        data-linkUrlApple="${i[1].url}"\n        data-linkNameBarnes="${i[2].name}"\n        data-linkUrlBarnes="${i[2].url}"\n      >\n        <a href="#" class="_link" class="book-item" data-id="${a}">\n          <div class="thumb">\n            <img class="lazyload" src="https://raw.githubusercontent.com/theGreatGrandfather/apple/main/src/images/testBook.png" data-src="${e}" alt="${t}" loading="lazy" width='335' height='500'/>\n            <div class="overlay">\n              <p class="overlay-text">quick view </p>\n            </div>\n          </div>\n          <h4 class="book-title">${t}</h4>\n          <p class="book-author">${n}</p>\n        </a>\n      </li>\n    `)).join("");var s=a("2shzp"),i=a("7Y9D8");const l="https://books-backend.p.goit.global",r=async()=>{try{return(await s.default.get(`${l}/books/category-list`)).data}catch(e){i.Notify.failure("Something went wrong. Try to reload the page")}},d=async()=>{try{return(await s.default.get(`${l}/books/top-books`)).data}catch(e){i.Notify.failure("Something went wrong. Try to reload the page")}throw new Error(error)},c=async e=>{try{return(await s.default.get(`${l}/books/category`,{params:{category:e}})).data}catch(e){i.Notify.failure("Something went wrong. Try to reload the page")}};i=a("7Y9D8");const m=document.querySelector(".categories__list");(async()=>(await r()).map((({list_name:e})=>`\n                <li class='categories__item _list'>\n                    <a data-categories__item data-listName='${e}' rel='noopener no-referrel nofollow' class='categories__link _link' href='#'>${e}</a>\n                </li>`)).sort().join(""))().then((e=>{m.insertAdjacentHTML("beforeend",e)})).catch((e=>{i.Notify.failure("Something went wrong. Try to reload the page")}));var g=a("gjiCh");const u=document.querySelector(".title_best-sellers"),p=async e=>await c(e);m.addEventListener("click",(e=>{if(e.target.hasAttribute("data-categories__item")){e.preventDefault(),(0,g.loaderOn)();const t=document.querySelector(".categories__list").getElementsByClassName("categories__link"),n=Array.from(t);for(let e=0;e<n.length;e++){n[e].classList.remove("active__link")}e.target.classList.add("active__link");const a=e.target.dataset.listname.split(" ");a.pop();const s=e.target.dataset.listname.split(" ")[e.target.dataset.listname.split(" ").length-1];p(e.target.dataset.listname).then((e=>{u.classList.add("no-change"),u.innerHTML=`${a.join(" ")}&nbsp\n                <span class="title_book">${s}</span>`,h.innerHTML=o(e),(0,g.loaderOff)(),document.documentElement.scrollWidth>=1440||document.querySelector("#best-sellers-container").scrollIntoView({behavior:"smooth",block:"start"})}))}}));g=a("gjiCh"),i=a("7Y9D8");const h=document.querySelector(".best_list");let L=5;const k=()=>!u.classList.contains("no-change"),y=async()=>{if(k())try{(0,g.loaderOn)();const e=await d();if(0===e.length)return;const t=e.map((({books:e,list_name:t})=>{const n=e.slice(0,L);return`<li class='best-item _list _anim-items'>\n                <h3 class='min-title'>${t}</h3>\n                <ul class='books-list'>\n                    ${o(n)}\n                </ul>\n                <button class='see_more' data-name="${t}">See More</button>\n              </li>`}));(0,g.loaderOff)(),h.innerHTML=t.join("")}catch(e){(0,g.loaderOff)(),i.Notify.failure("Something went wrong. Try to reload the page")}},v=()=>{L=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(min-width: 768px) and (max-width: 1439px)").matches?3:5,y()},w=((e,t)=>{let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>e(...a)),t)}})(v,300);window.addEventListener("resize",w);window.addEventListener("resize",(()=>{k(),0})),window.addEventListener("load",(()=>{v()}));var f=a("a0qxx"),b=a("eyjy7"),_=a("2ix2C"),E=(b=a("eyjy7"),a("ftYLF"));const T=(0,b.getAuth)(_.app),x=(0,E.getFirestore)(_.app),$={body:document.querySelector("body"),modal:document.getElementById("modal"),modalInner:document.getElementById("modal-inner"),modalTitle:document.getElementById("modal-title"),modalAuthor:document.getElementById("modal-author"),modalDescr:document.getElementById("modal-description"),modalImg:document.getElementById("modal-image"),modalClose:document.getElementById("modal-close-btn"),amazonLink:document.getElementById("amazon-link"),appleLink:document.getElementById("apple-link"),barnesLink:document.getElementById("barnes-link"),addToList:document.getElementById("modal-add-to-list"),modalGreetings:document.getElementById("modal-greetings-text"),books:document.getElementById("best-sellers-container")},C="Add to shopping list",B="Remove from the shopping list";let j={},S=!1;const I=e=>{$.modal.classList.add("modal-js"),$.body.classList.remove("no-scroll-js"),$.modalClose.removeEventListener("click",I),document.removeEventListener("keydown",N),$.addToList.removeEventListener("click",z),$.modal.removeEventListener("click",q)},q=e=>{e.target===e.currentTarget&&(I(),$.modalClose.removeEventListener("click",I),document.removeEventListener("keydown",N),$.addToList.removeEventListener("click",z),$.modal.removeEventListener("click",q))},N=e=>{"Escape"===e.key&&(I(),$.modalClose.removeEventListener("click",I),document.removeEventListener("keydown",N),$.addToList.removeEventListener("click",z),$.modal.removeEventListener("click",q))},z=()=>{S?((0,f.delBook)(j.id),$.addToList.textContent=C,$.modalGreetings.classList.add("modal-greetings-text-js"),S=!1):((0,f.pullBookData)(j),$.addToList.textContent=B,$.modalGreetings.classList.remove("modal-greetings-text-js"),S=!0)};$.books.addEventListener("click",(e=>{if(e.preventDefault(),(0,b.onAuthStateChanged)(T,(async e=>{if(e){const t=e.email,n=await(0,E.getDocs)((0,E.collection)(x,t)),a=[];n.forEach((e=>a.push(e.data().id))),a.some((e=>e===j.id))?(S=!0,$.addToList.textContent=B,$.modalGreetings.classList.remove("modal-greetings-text-js")):(S=!1,$.addToList.textContent=C,$.modalGreetings.classList.add("modal-greetings-text-js")),$.addToList.disabled=!1,$.addToList.style.cursor="pointer"}else $.addToList.disabled=!0,$.addToList.innerText="Please, sign up to shopping",$.addToList.style.cursor="not-allowed"})),!e.target.closest(".book-item"))return;$.modalClose.addEventListener("click",I),document.addEventListener("keydown",N),$.addToList.addEventListener("click",z),$.modal.addEventListener("click",q);const t=e.target.closest(".book-item");j={id:t.querySelector("._link").dataset.id,title:t.dataset.title,img:t.dataset.image,author:t.dataset.author,description:t.dataset.description,amazonLink:t.dataset.linkurlamazon,appleLink:t.dataset.linkurlapple,barnesLink:t.dataset.linkurlbarnes,listname:t.dataset.listname},$.modalTitle.textContent=j.title,$.modalAuthor.textContent=j.author,$.modalDescr.textContent=j.description,$.modalImg.src=j.img,$.amazonLink.href=j.amazonLink,$.appleLink.href=j.appleLink,$.barnesLink.href=j.barnesLink,S?($.addToList.textContent=B,$.modalGreetings.classList.remove("modal-greetings-text-js")):($.addToList.textContent=C,$.modalGreetings.classList.add("modal-greetings-text-js")),$.body.classList.add("no-scroll-js"),$.modal.classList.toggle("modal-js")}));const A=document.querySelectorAll("._anim-items");if(A.length>0){function H(){for(let e=0;e<A.length;e++){const t=A[e],n=t.offsetHeight,a=D(t).top,o=4;let s=window.innerHeight-n/o;n>window.innerHeight&&(s=window.innerHeight-window.innerHeight/o),scrollY>a-s&scrollY<a+n?t.classList.add("_active"):t.classList.remove("_active")}}function D(e){const t=e.getBoundingClientRect(),n=window.scrollX||document.documentElement.scrollLeft,a=window.scrollY||document.documentElement.scrollTop;return{top:t.top+a,left:t.left+n}}window.addEventListener("scroll",H),setTimeout((()=>{H()}),300)}a("6J4zK"),a("epHO8");const O=document.querySelector(".go-top");O.hidden=!0;const M=()=>{window.scrollY>0&&(window.scrollBy(0,-82),setTimeout(M,0))};window.addEventListener("scroll",(()=>{const e=window.scrollY,t=document.documentElement.clientHeight;O.hidden=!(5*e>=t)})),O.addEventListener("click",M),a("4Z4PC"),a("e3Z2B");g=a("gjiCh");h.addEventListener("click",(e=>{if(e.target.classList.contains("see_more")){e.preventDefault(),(0,g.loaderOn)();const t=document.querySelector(".categories__list").getElementsByClassName("categories__link"),n=Array.from(t);for(let t=0;t<n.length;t++){const a=n[t];a.classList.remove("active__link"),e.target.dataset.name===a.innerText&&a.classList.add("active__link")}const a=e.target.dataset.name.split(" ");a.pop();const s=e.target.dataset.name.split(" ")[e.target.dataset.name.split(" ").length-1];p(e.target.dataset.name).then((e=>{u.classList.add("no-change"),u.innerHTML=`${a.join(" ")}&nbsp\n                <span class="title_book">${s}</span>`,h.innerHTML=o(e),(0,g.loaderOff)(),document.querySelector("#best-sellers-container").scrollIntoView({behavior:"smooth",block:"start"})}))}})),a("5FnTc"),a("gjiCh");const G=document.querySelector(".home"),Y=document.querySelector(".menu-home");G.classList.add("active"),Y.classList.add("active");
//# sourceMappingURL=index.ea1ca32a.js.map
